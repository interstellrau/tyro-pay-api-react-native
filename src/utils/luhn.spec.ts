import { luhnCheck } from './luhn';

describe('luhn check', () => {
  // https://www.verygoodsecurity.com/docs/vgs-collect/test-data/
  it.each([
    ['American Express', '3400 000999 00051'],
    ['American Express', '3434 343434 34343'],
    ['American Express', '3700 000000 00002 '],
    ['American Express', '3714 49635398431  '],
    ['American Express', '3782822463 10005'],
    ['American Express', '378734493671000'],
    ['Dankort', '5019 3461 2641 5137'],
    ['Dankort', '5019 5555 4444 5555'],
    ['Dankort', '5019717010103742'],
    ['Diners Club', '3056 930009 020004'],
    ['Diners Club', '3056 930902 5904'],
    ['Diners Club', '3059 990002 6340'],
    ['Diners Club', '3096000032 340126'],
    ['Diners Club', '3600 6666333344'],
    ['Diners Club', '38520000023237'],
    ['Elo', '5019 3461 2641 5137'],
    ['Elo', '5019 7170 1010 3742'],
    ['Elo', '5066 9911 1111 1118'],
    ['Elo', '6362970000457013'],
    ['Forbrugsforeningen', '6007 2200 0000 0004'],
    ['Hipercard', '6062 8267 8627 6634'],
    ['Hipercard', '6062 82888866 6688'],
    ['JCB', '3530 1113 3330 0000'],
    ['JCB', '3566 0020 2036 0505'],
    ['JCB', '3569 9900 1003 0400'],
    ['JCB', '3569 9900 1009 5841'],
    ['Maestro', '5611 1111 1111 1113'],
    ['Maestro', '5711 1111 1111 1112'],
    ['Maestro', '6759 1560 1980 8393'],
    ['Maestro', '6759 6498 2643 8453'],
    ['Maestro', '6761 0000 0000 0006'],
    ['Mastercard', '2222 4000 6000 0007'],
    ['Mastercard', '2223 0000 4841 0010 '],
    ['Mastercard', '5100 2900 2900 2909'],
    ['Mastercard', '5136 3333 3333 3335 '],
    ['Mastercard', '5555 4444 3333 1111'],
    ['UnionPay', '6212 3456 7890 1232'],
    ['UnionPay', '6212 3456 7890 1265'],
    ['Visa', '4000 6200 0000 0007 '],
    ['Visa', '4111 1111 1111 1111'],
    ['Visa', '4242424242424242'],
    ['Visa', '4571 0000 0000 0001'],
    ['Visa', '46070000 00000009'],
    ['Visa Electron', '4917 3000 0000 0008'],
    ['Visa Electron', '4917300800000000'],
  ])('should PASS luhn check %s card: %s', (name, cardNumber) => {
    expect(luhnCheck(cardNumber)).toEqual(true);
  });

  it.each([
    '',
    '  ',
    '2',
    'abc',
    'abc 123',
    'a9 sr s9 e1',
    'asdfghjkl112233',
    '74933344460784',
    '72964444467671',
    '70440000777788',
    '715883079732875',
    '9544634463446343',
    '0889088908890889',
    '8555555555555555',
    '9155555555555556',
    '0406260120610078',
    '9055555555555557',
    '9453999988889999',
    '7974555777744444',
    '9999888877775555',
    '0105444444444440',
    '9453151454547186',
    '0455544433344457',
  ])("should FAIL luhn check for card number: '%s'", (cardNumber) => {
    expect(luhnCheck(cardNumber)).toEqual(false);
  });
});
